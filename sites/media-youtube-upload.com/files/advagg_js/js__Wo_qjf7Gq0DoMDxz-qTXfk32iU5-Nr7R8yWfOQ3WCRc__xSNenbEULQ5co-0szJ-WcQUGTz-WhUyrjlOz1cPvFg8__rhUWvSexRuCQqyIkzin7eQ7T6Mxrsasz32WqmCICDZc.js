/* Source and licensing information for the line(s) below can be found at http://media-youtube-upload.com/sites/all/modules/contrib/media/js/media.popups.js. */
(function($){namespace('Drupal.media.popups');Drupal.media.popups.mediaBrowser=function(onSelect,globalOptions,pluginOptions,widgetOptions){var options=Drupal.media.popups.mediaBrowser.getDefaults();options.global=$.extend({},options.global,globalOptions);options.plugins=pluginOptions;options.widget=$.extend({},options.widget,widgetOptions);var browserSrc=options.widget.src;if($.isArray(browserSrc)&&browserSrc.length)browserSrc=browserSrc[browserSrc.length-1];var params={};$.extend(params,options.global);params.plugins=options.plugins;browserSrc+='&'+$.param(params);var mediaIframe=Drupal.media.popups.getPopupIframe(browserSrc,'mediaBrowser');mediaIframe.bind('load',options,options.widget.onLoad);var ok='OK',notSelected='You have not selected anything!';if(Drupal&&Drupal.t){ok=Drupal.t(ok);notSelected=Drupal.t(notSelected)};var dialogOptions=options.dialog;dialogOptions.buttons[ok]=function(){var selected=this.contentWindow.Drupal.media.browser.selectedMedia;if(selected.length<1){alert(notSelected);return};onSelect(selected);$(this).dialog("close")};var dialog=mediaIframe.dialog(dialogOptions);Drupal.media.popups.sizeDialog(dialog);Drupal.media.popups.resizeDialog(dialog);Drupal.media.popups.scrollDialog(dialog);Drupal.media.popups.overlayDisplace(dialog.parents(".ui-dialog"));return mediaIframe};Drupal.media.popups.mediaBrowser.mediaBrowserOnLoad=function(e){var options=e.data;if(this.contentWindow.Drupal.media==undefined)return;if(this.contentWindow.Drupal.media.browser.selectedMedia.length>0){var ok=(Drupal&&Drupal.t)?Drupal.t('OK'):'OK',ok_func=$(this).dialog('option','buttons')[ok];ok_func.call(this);return}};Drupal.media.popups.mediaBrowser.getDefaults=function(){return{global:{types:[],activePlugins:[]},widget:{src:Drupal.settings.media.browserUrl,onLoad:Drupal.media.popups.mediaBrowser.mediaBrowserOnLoad},dialog:Drupal.media.popups.getDialogOptions()}};Drupal.media.popups.mediaBrowser.finalizeSelection=function(){var selected=this.contentWindow.Drupal.media.browser.selectedMedia;if(selected.length<1){alert(notSelected);return};onSelect(selected);$(this).dialog("close")};Drupal.media.popups.mediaStyleSelector=function(mediaFile,onSelect,options){var defaults=Drupal.media.popups.mediaStyleSelector.getDefaults();if(typeof defaults.src==='string'){defaults.src=defaults.src.replace('-media_id-',mediaFile.fid)+'&fields='+encodeURIComponent(JSON.stringify(mediaFile.fields))}else{var src=defaults.src.shift();defaults.src.unshift(src);defaults.src=src.replace('-media_id-',mediaFile.fid)+'&fields='+encodeURIComponent(JSON.stringify(mediaFile.fields))};options=$.extend({},defaults,options);var mediaIframe=Drupal.media.popups.getPopupIframe(options.src,'mediaStyleSelector');mediaIframe.bind('load',options,options.onLoad);var ok='OK',notSelected='Very sorry, there was an unknown error embedding media.';if(Drupal&&Drupal.t){ok=Drupal.t(ok);notSelected=Drupal.t(notSelected)};var dialogOptions=Drupal.media.popups.getDialogOptions();dialogOptions.buttons[ok]=function(){var formattedMedia=this.contentWindow.Drupal.media.formatForm.getFormattedMedia();if(!formattedMedia){alert(notSelected);return};onSelect(formattedMedia);$(this).dialog("close")};var dialog=mediaIframe.dialog(dialogOptions);Drupal.media.popups.sizeDialog(dialog);Drupal.media.popups.resizeDialog(dialog);Drupal.media.popups.scrollDialog(dialog);Drupal.media.popups.overlayDisplace(dialog.parents(".ui-dialog"));return mediaIframe};Drupal.media.popups.mediaStyleSelector.mediaBrowserOnLoad=function(e){};Drupal.media.popups.mediaStyleSelector.getDefaults=function(){return{src:Drupal.settings.media.styleSelectorUrl,onLoad:Drupal.media.popups.mediaStyleSelector.mediaBrowserOnLoad}};Drupal.media.popups.mediaFieldEditor=function(fid,onSelect,options){var defaults=Drupal.media.popups.mediaFieldEditor.getDefaults();defaults.src=defaults.src.replace('-media_id-',fid);options=$.extend({},defaults,options);var mediaIframe=Drupal.media.popups.getPopupIframe(options.src,'mediaFieldEditor');mediaIframe.bind('load',options,options.onLoad);var ok='OK',notSelected='Very sorry, there was an unknown error embedding media.';if(Drupal&&Drupal.t){ok=Drupal.t(ok);notSelected=Drupal.t(notSelected)};var dialogOptions=Drupal.media.popups.getDialogOptions();dialogOptions.buttons[ok]=function(){var formattedMedia=this.contentWindow.Drupal.media.formatForm.getFormattedMedia();if(!formattedMedia){alert(notSelected);return};onSelect(formattedMedia);$(this).dialog("close")};var dialog=mediaIframe.dialog(dialogOptions);Drupal.media.popups.sizeDialog(dialog);Drupal.media.popups.resizeDialog(dialog);Drupal.media.popups.scrollDialog(dialog);Drupal.media.popups.overlayDisplace(dialog);return mediaIframe};Drupal.media.popups.mediaFieldEditor.mediaBrowserOnLoad=function(e){};Drupal.media.popups.mediaFieldEditor.getDefaults=function(){return{src:'/media/-media_id-/edit?render=media-popup',onLoad:Drupal.media.popups.mediaFieldEditor.mediaBrowserOnLoad}};Drupal.media.popups.getDialogOptions=function(){return{buttons:{},dialogClass:Drupal.settings.media.dialogOptions.dialogclass,modal:Drupal.settings.media.dialogOptions.modal,draggable:Drupal.settings.media.dialogOptions.draggable,resizable:Drupal.settings.media.dialogOptions.resizable,minWidth:Drupal.settings.media.dialogOptions.minwidth,width:Drupal.settings.media.dialogOptions.width,height:Drupal.settings.media.dialogOptions.height,position:Drupal.settings.media.dialogOptions.position,overlay:{backgroundColor:Drupal.settings.media.dialogOptions.overlay.backgroundcolor,opacity:Drupal.settings.media.dialogOptions.overlay.opacity},zIndex:Drupal.settings.media.dialogOptions.zindex,close:function(event,ui){$(event.target).remove()}}};Drupal.media.popups.getPopupIframe=function(src,id,options){var defaults={width:'100%',scrolling:'auto'},options=$.extend({},defaults,options);return $('<iframe class="media-modal-frame"/>').attr('src',src).attr('width',options.width).attr('id',id).attr('scrolling',options.scrolling)};Drupal.media.popups.overlayDisplace=function(dialog){if(parent.window.Drupal.overlay&&jQuery.isFunction(parent.window.Drupal.overlay.getDisplacement)){var overlayDisplace=parent.window.Drupal.overlay.getDisplacement('top');if(dialog.offset().top<overlayDisplace)dialog.css('top',overlayDisplace)}};Drupal.media.popups.sizeDialog=function(dialogElement){if(!dialogElement.is(':visible'))return;var windowWidth=$(window).width(),dialogWidth=windowWidth*0.8,windowHeight=$(window).height(),dialogHeight=windowHeight*0.8;dialogElement.dialog("option","width",dialogWidth);dialogElement.dialog("option","height",dialogHeight);dialogElement.dialog("option","position",'center');$('.media-modal-frame').width('100%')};Drupal.media.popups.resizeDialog=function(dialogElement){$(window).resize(function(){Drupal.media.popups.sizeDialog(dialogElement)})};Drupal.media.popups.scrollDialog=function(dialogElement){$(window).scroll(function(){if(!dialogElement.is(':visible'))return;dialogElement.dialog("option","position",'center')})}})(jQuery);;
/* Source and licensing information for the above line(s) can be found at http://media-youtube-upload.com/sites/all/modules/contrib/media/js/media.popups.js. */
/* Source and licensing information for the line(s) below can be found at http://media-youtube-upload.com/sites/all/modules/contrib/media/js/media.js. */
(function($){Drupal.behaviors.mediaElement={attach:function(context,settings){if(settings.media&&settings.media.elements)$.each(settings.media.elements,function(selector){$(selector,context).once('media-browser-launch',function(){var configuration=settings.media.elements[selector];$(selector,context).children('.browse').show();$(selector,context).children('.upload').hide();$(selector,context).children('.attach').hide();$(selector,context).children('.browse').bind('click',{configuration:configuration},Drupal.media.openBrowser)})})}};Drupal.behaviors.mediaButtons={attach:function(context){$('input.form-submit',context).bind('mousedown',Drupal.media.disableFields)},detach:function(context){$('input.form-submit',context).unbind('mousedown',Drupal.media.disableFields)}};Drupal.media=Drupal.media||{};Drupal.media.openBrowser=function(event){var clickedButton=this,configuration=event.data.configuration.global,fidField=$(this).siblings('.fid'),previewField=$(this).siblings('.preview'),uploadField=$(this).siblings('.upload'),editButton=$(this).siblings('.edit'),removeButton=$(this).siblings('.remove');Drupal.media.popups.mediaBrowser(function(mediaFiles){if(mediaFiles.length<0)return;var mediaFile=mediaFiles[0];uploadField.val(mediaFile.fid);uploadField.trigger('change');var attachButton=uploadField.siblings('.attach');attachButton.trigger('mousedown');previewField.html(mediaFile.preview)},configuration);return false};Drupal.media.disableFields=function(event){var clickedButton=this;if(!$(clickedButton).hasClass('ajax-processed'))return;var $enabledFields=[];if($(this).closest('div.media-widget').length>0)$enabledFields=$(this).closest('div.media-widget').find('input.attach');var $fieldsToTemporarilyDisable=$('div.media-widget input.attach').not($enabledFields).not(':disabled');$fieldsToTemporarilyDisable.attr('disabled','disabled');setTimeout(function(){$fieldsToTemporarilyDisable.attr('disabled',false)},1e3)}})(jQuery);;
/* Source and licensing information for the above line(s) can be found at http://media-youtube-upload.com/sites/all/modules/contrib/media/js/media.js. */
